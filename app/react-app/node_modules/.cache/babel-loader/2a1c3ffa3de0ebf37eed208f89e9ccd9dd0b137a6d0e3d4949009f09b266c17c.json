{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Diogo\\\\Desktop\\\\MultiFlowML\\\\multiflow\\\\app\\\\react-app\\\\src\\\\components\\\\Projects.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faSearch, faChevronDown, faChevronUp, faChevronRight, faClock, faFolderPlus, faPause, faPlay } from '@fortawesome/free-solid-svg-icons';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Projects() {\n  _s();\n  const [projects, setProjects] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [expandedProject, setExpandedProject] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const navigate = useNavigate();\n  const [totalPercentage, setTotalPercentage] = useState(0);\n\n  // Get all projects\n  useEffect(() => {\n    fetchProjects();\n  }, []);\n\n  // Endpoint to get all projects\n  const fetchProjects = async () => {\n    try {\n      const response = await axios.get('http://localhost:3001/projects');\n      setProjects(response.data);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching projects:', error);\n      setLoading(false);\n    }\n  };\n\n  // Function to expand and collapse the project item\n  const toggleProjectDescription = projectId => {\n    setExpandedProject(expandedProject === projectId ? null : projectId);\n  };\n\n  // Function to search button and search query\n  const handleSearchChange = e => {\n    setSearchQuery(e.target.value);\n  };\n\n  // Endpoint to search for project based on the search query\n  const handleSearch = async () => {\n    try {\n      const response = await axios.get(`http://localhost:3001/projects/search?query=${searchQuery}`);\n      setProjects(response.data);\n    } catch (error) {\n      console.error('Error searching projects:', error);\n    }\n  };\n\n  // Function to make Enter key to execute the search function\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSearch();\n    }\n  };\n\n  // Function to parse date and calculate time from now\n  const parseDate = dateString => {\n    const dateStarted = new Date(dateString);\n    const currentDate = new Date();\n    const diffMs = currentDate - dateStarted;\n    const diffMins = Math.round(diffMs / (1000 * 60));\n    if (diffMins < 60) {\n      return `${diffMins} ${diffMins === 1 ? 'minute' : 'minutes'} ago`;\n    } else if (diffMins < 1440) {\n      const diffHours = Math.floor(diffMins / 60);\n      return `${diffHours} ${diffHours === 1 ? 'hour' : 'hours'} ago`;\n    } else if (diffMins < 10080) {\n      const diffDays = Math.floor(diffMins / 1440);\n      return `${diffDays} ${diffDays === 1 ? 'day' : 'days'} ago`;\n    } else if (diffMins < 43800) {\n      const diffWeeks = Math.floor(diffMins / 10080);\n      return `${diffWeeks} ${diffWeeks === 1 ? 'week' : 'weeks'} ago`;\n    } else if (diffMins < 525600) {\n      const diffMonths = Math.floor(diffMins / 43800);\n      return `${diffMonths} ${diffMonths === 1 ? 'month' : 'months'} ago`;\n    } else {\n      const diffYears = Math.floor(diffMins / 525600);\n      return `${diffYears} ${diffYears === 1 ? 'year' : 'years'} ago`;\n    }\n  };\n\n  // Function to parse date into hh:mm dd/mm/yyyy\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n\n    // Format hours and minutes with leading zeros\n    const hours = String(date.getHours()).padStart(2, '0');\n    const minutes = String(date.getMinutes()).padStart(2, '0');\n\n    // Format day, month, and year\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const year = date.getFullYear();\n    return `${hours}:${minutes} ${day}/${month}/${year}`;\n  };\n\n  // Function to start and stop project (using endpoints)\n  const handleProjectStatus = async (projectId, status) => {\n    try {\n      if (status) {\n        // Stop project\n        await axios.put(`http://localhost:3001/projects/stop/${projectId}`);\n        console.log(\"--> Stop Project\");\n      } else {\n        // Start project\n        await axios.put(`http://localhost:3001/projects/start/${projectId}`);\n        console.log(\"--> Play Project\");\n        const ws = new WebSocket('ws://localhost:8082');\n\n        // Event listeners for WebSocket events\n        ws.onopen = () => {\n          console.log('WebSocket connection established');\n          ws.send(projectId);\n        };\n        ws.onmessage = event => {\n          console.log('Message received from server:', event.data);\n          const data = JSON.parse(event.data);\n          setTotalPercentage(prev => prev + data.percentage);\n          console.log('Message received from server:', data);\n          //setStatus(event.data);\n        };\n        ws.onclose = () => {\n          console.log('WebSocket connection closed');\n        };\n        ws.onerror = error => {\n          console.error('WebSocket error:', error);\n        };\n      }\n      // Refresh project list after updating status\n      fetchProjects();\n    } catch (error) {\n      console.error('Error updating project status:', error);\n    }\n  };\n\n  // Function to start and stop stream (using endpoints)\n  const handleStreamStatus = async (streamId, status) => {\n    try {\n      if (status) {\n        // Stop stream\n        await axios.put(`http://localhost:3001/streams/stop/${streamId}`);\n      } else {\n        // Start stream\n        await axios.put(`http://localhost:3001/streams/start/${streamId}`);\n      }\n      // Refresh stream list after updating status\n      fetchProjects();\n    } catch (error) {\n      console.error('Error updating stream status:', error);\n    }\n  };\n\n  // Function to handle click event of \"Add Project\" button\n  const handleAddProjectClick = () => {\n    navigate('/add-project'); // Navigate to add project page\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header mt-2 d-flex justify-content-between align-items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"page-title\",\n        children: \"Projects\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: handleAddProjectClick,\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faPlus,\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Add Project\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panel-content mt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group d-flex justify-content-between align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"search\",\n            className: \"sr-only\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            name: \"search\",\n            id: \"search\",\n            placeholder: \"Search for projects\",\n            value: searchQuery,\n            onChange: handleSearchChange,\n            onKeyPress: handleKeyPress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ms-2 btn btn-secondary\",\n            style: {\n              backgroundColor: '#E6E8E6',\n              border: 'none'\n            },\n            onClick: handleSearch,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faSearch,\n                className: \"me-2 ms-2\",\n                style: {\n                  color: '#000'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 140\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 134\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Loading projects...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 mt-4\",\n        children: projects.length === 0 ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"There are no projects that match your search.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group\",\n          children: projects.map(project => {\n            var _projects$find;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-1 mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"list-group-item\",\n                style: {\n                  backgroundColor: '#e6e8e6',\n                  borderColor: '#e6e8e6',\n                  borderRadius: '8px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row align-items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-9\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex align-items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        onClick: () => toggleProjectDescription(project._id),\n                        style: {\n                          cursor: 'pointer'\n                        },\n                        icon: expandedProject === project._id ? faChevronDown : faChevronRight,\n                        className: \"me-2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 207,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"ms-2\",\n                        onClick: () => navigate(`/projects/${project._id}`),\n                        style: {\n                          cursor: 'pointer',\n                          textDecoration: 'none'\n                        },\n                        onMouseEnter: e => e.target.style.textDecoration = 'underline',\n                        onMouseLeave: e => e.target.style.textDecoration = 'none',\n                        children: [project.name, \" - 100%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 208,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"ms-4 tiny-label\",\n                        style: {\n                          fontSize: '10px',\n                          color: 'gray'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                          icon: faClock\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 217,\n                          columnNumber: 108\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"ms-1\",\n                          children: [\"Last started: \", project.dateLastStarted ? parseDate(project.dateLastStarted) : 'Never']\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 217,\n                          columnNumber: 142\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 217,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"ms-3 tiny-label\",\n                        style: {\n                          fontSize: '10px',\n                          color: 'gray'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                          icon: faFolderPlus\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 218,\n                          columnNumber: 108\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"ms-1\",\n                          children: \"Created at: \"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 218,\n                          columnNumber: 147\n                        }, this), \" \", formatDate(project.dateCreated)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 218,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex align-items-center justify-content-end\",\n                      children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        onClick: () => handleProjectStatus(project._id, project.status),\n                        icon: project.status ? faPause : faPlay,\n                        size: \"2x\",\n                        style: {\n                          cursor: 'pointer',\n                          display: 'flex',\n                          justifyContent: 'center'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 224,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 23\n                }, this), expandedProject === project._id && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-2 mb-1\",\n                  children: project.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 21\n              }, this), expandedProject === project._id && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row d-flex justify-content-end\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-11\",\n                  children: ((_projects$find = projects.find(proj => proj._id === project._id)) === null || _projects$find === void 0 ? void 0 : _projects$find.streams.length) > 0 ?\n                  // Render streams if there are any associated\n                  projects.find(proj => proj._id === project._id).streams.map((stream, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"list-group-item mt-1 mb-1\",\n                    style: {\n                      backgroundColor: '#F5F6F5',\n                      borderRadius: '8px'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex align-items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-md-9\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"d-flex align-items-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"ms-2\",\n                            onClick: () => navigate(`/streams/${stream._id}`),\n                            style: {\n                              cursor: 'pointer',\n                              textDecoration: 'none'\n                            },\n                            onMouseEnter: e => e.target.style.textDecoration = 'underline',\n                            onMouseLeave: e => e.target.style.textDecoration = 'none',\n                            children: stream.topic\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 247,\n                            columnNumber: 39\n                          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                            className: \"ms-4 tiny-label\",\n                            style: {\n                              fontSize: '10px',\n                              color: 'gray'\n                            },\n                            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                              icon: faClock\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 256,\n                              columnNumber: 118\n                            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"ms-1\",\n                              children: [\"Last started: \", stream.dateLastStarted ? parseDate(stream.dateLastStarted) : 'Never']\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 256,\n                              columnNumber: 152\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 256,\n                            columnNumber: 39\n                          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                            className: \"ms-3 tiny-label\",\n                            style: {\n                              fontSize: '10px',\n                              color: 'gray'\n                            },\n                            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                              icon: faFolderPlus\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 257,\n                              columnNumber: 118\n                            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"ms-1\",\n                              children: \"Created at: \"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 257,\n                              columnNumber: 157\n                            }, this), \" \", formatDate(stream.dateCreated)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 257,\n                            columnNumber: 39\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 245,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 244,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-md-3\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"d-flex align-items-center justify-content-end me-1\",\n                          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                            onClick: () => handleStreamStatus(stream._id, stream.status),\n                            icon: stream.status ? faPause : faPlay,\n                            style: {\n                              cursor: 'pointer',\n                              fontSize: '25px',\n                              display: 'flex',\n                              justifyContent: 'center'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 263,\n                            columnNumber: 39\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 262,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 261,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 243,\n                      columnNumber: 33\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 31\n                  }, this)) :\n                  /*#__PURE__*/\n                  // Render message if there are no streams associated\n                  _jsxDEV(\"p\", {\n                    className: \"mt-2 mb-1\",\n                    style: {\n                      fontSize: '14px',\n                      color: 'gray'\n                    },\n                    children: \"There are no streams associated with this project yet.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 23\n              }, this)]\n            }, project._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n_s(Projects, \"lkle+UK5Ir5seGEo1gngJ/+PGrU=\", false, function () {\n  return [useNavigate];\n});\n_c = Projects;\nexport default Projects;\nvar _c;\n$RefreshReg$(_c, \"Projects\");","map":{"version":3,"names":["axios","React","useState","useEffect","FontAwesomeIcon","faPlus","faSearch","faChevronDown","faChevronUp","faChevronRight","faClock","faFolderPlus","faPause","faPlay","useNavigate","jsxDEV","_jsxDEV","Projects","_s","projects","setProjects","loading","setLoading","expandedProject","setExpandedProject","searchQuery","setSearchQuery","navigate","totalPercentage","setTotalPercentage","fetchProjects","response","get","data","error","console","toggleProjectDescription","projectId","handleSearchChange","e","target","value","handleSearch","handleKeyPress","key","parseDate","dateString","dateStarted","Date","currentDate","diffMs","diffMins","Math","round","diffHours","floor","diffDays","diffWeeks","diffMonths","diffYears","formatDate","date","hours","String","getHours","padStart","minutes","getMinutes","day","getDate","month","getMonth","year","getFullYear","handleProjectStatus","status","put","log","ws","WebSocket","onopen","send","onmessage","event","JSON","parse","prev","percentage","onclose","onerror","handleStreamStatus","streamId","handleAddProjectClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","icon","htmlFor","type","name","id","placeholder","onChange","onKeyPress","style","backgroundColor","border","color","length","map","project","_projects$find","borderColor","borderRadius","_id","cursor","textDecoration","onMouseEnter","onMouseLeave","fontSize","dateLastStarted","dateCreated","size","display","justifyContent","description","find","proj","streams","stream","index","topic","_c","$RefreshReg$"],"sources":["C:/Users/Diogo/Desktop/MultiFlowML/multiflow/app/react-app/src/components/Projects.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faSearch, faChevronDown, faChevronUp, faChevronRight, faClock, faFolderPlus, faPause, faPlay } from '@fortawesome/free-solid-svg-icons';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Projects() {\r\n  const [projects, setProjects] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [expandedProject, setExpandedProject] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const navigate = useNavigate();\r\n  const [totalPercentage, setTotalPercentage] = useState(0);\r\n\r\n  // Get all projects\r\n  useEffect(() => {\r\n    fetchProjects();\r\n  }, []);\r\n\r\n  // Endpoint to get all projects\r\n  const fetchProjects = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3001/projects');\r\n      setProjects(response.data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching projects:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Function to expand and collapse the project item\r\n  const toggleProjectDescription = (projectId) => {\r\n    setExpandedProject(expandedProject === projectId ? null : projectId);\r\n  };\r\n\r\n  // Function to search button and search query\r\n  const handleSearchChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n\r\n  // Endpoint to search for project based on the search query\r\n  const handleSearch = async () => {\r\n    try {\r\n      const response = await axios.get(`http://localhost:3001/projects/search?query=${searchQuery}`);\r\n      setProjects(response.data);\r\n    } catch (error) {\r\n      console.error('Error searching projects:', error);\r\n    }\r\n  };\r\n\r\n  // Function to make Enter key to execute the search function\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSearch();\r\n    }\r\n  };\r\n\r\n  // Function to parse date and calculate time from now\r\n  const parseDate = (dateString) => {\r\n    const dateStarted = new Date(dateString);\r\n    const currentDate = new Date();\r\n    const diffMs = currentDate - dateStarted;\r\n    const diffMins = Math.round(diffMs / (1000 * 60));\r\n\r\n    if (diffMins < 60) {\r\n      return `${diffMins} ${diffMins === 1 ? 'minute' : 'minutes'} ago`;\r\n    } else if (diffMins < 1440) {\r\n      const diffHours = Math.floor(diffMins / 60);\r\n      return `${diffHours} ${diffHours === 1 ? 'hour' : 'hours'} ago`;\r\n    } else if (diffMins < 10080) {\r\n      const diffDays = Math.floor(diffMins / 1440);\r\n      return `${diffDays} ${diffDays === 1 ? 'day' : 'days'} ago`;\r\n    } else if (diffMins < 43800) {\r\n      const diffWeeks = Math.floor(diffMins / 10080);\r\n      return `${diffWeeks} ${diffWeeks === 1 ? 'week' : 'weeks'} ago`;\r\n    } else if (diffMins < 525600) {\r\n      const diffMonths = Math.floor(diffMins / 43800);\r\n      return `${diffMonths} ${diffMonths === 1 ? 'month' : 'months'} ago`;\r\n    } else {\r\n      const diffYears = Math.floor(diffMins / 525600);\r\n      return `${diffYears} ${diffYears === 1 ? 'year' : 'years'} ago`;\r\n    }\r\n  };\r\n\r\n  // Function to parse date into hh:mm dd/mm/yyyy\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n\r\n    // Format hours and minutes with leading zeros\r\n    const hours = String(date.getHours()).padStart(2, '0');\r\n    const minutes = String(date.getMinutes()).padStart(2, '0');\r\n\r\n    // Format day, month, and year\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const year = date.getFullYear();\r\n\r\n    return `${hours}:${minutes} ${day}/${month}/${year}`;\r\n  };\r\n\r\n  // Function to start and stop project (using endpoints)\r\n  const handleProjectStatus = async (projectId, status) => {\r\n    try {\r\n      if (status) {\r\n        // Stop project\r\n        await axios.put(`http://localhost:3001/projects/stop/${projectId}`);\r\n\r\n        console.log(\"--> Stop Project\");\r\n      } else {\r\n        // Start project\r\n        await axios.put(`http://localhost:3001/projects/start/${projectId}`);\r\n\r\n        console.log(\"--> Play Project\");\r\n\r\n        const ws = new WebSocket('ws://localhost:8082');\r\n\r\n        // Event listeners for WebSocket events\r\n        ws.onopen = () => {\r\n            console.log('WebSocket connection established');\r\n            ws.send(projectId);\r\n        };\r\n\r\n        ws.onmessage = (event) => {\r\n          console.log('Message received from server:', event.data);\r\n\r\n          const data = JSON.parse(event.data);\r\n\r\n          setTotalPercentage(prev => prev + data.percentage);\r\n        \r\n          console.log('Message received from server:', data);\r\n          //setStatus(event.data);\r\n        };\r\n\r\n        ws.onclose = () => {\r\n          console.log('WebSocket connection closed');\r\n        };\r\n\r\n        ws.onerror = (error) => {\r\n          console.error('WebSocket error:', error);\r\n        };\r\n      }\r\n      // Refresh project list after updating status\r\n      fetchProjects();\r\n    } catch (error) {\r\n      console.error('Error updating project status:', error);\r\n    }\r\n  };\r\n\r\n  // Function to start and stop stream (using endpoints)\r\n  const handleStreamStatus = async (streamId, status) => {\r\n    try {\r\n      if (status) {\r\n        // Stop stream\r\n        await axios.put(`http://localhost:3001/streams/stop/${streamId}`);\r\n      } else {\r\n        // Start stream\r\n        await axios.put(`http://localhost:3001/streams/start/${streamId}`);\r\n      }\r\n      // Refresh stream list after updating status\r\n      fetchProjects();\r\n    } catch (error) {\r\n      console.error('Error updating stream status:', error);\r\n    }\r\n  };\r\n\r\n  // Function to handle click event of \"Add Project\" button\r\n  const handleAddProjectClick = () => {\r\n    navigate('/add-project'); // Navigate to add project page\r\n  };\r\n\r\n  return (\r\n    <div className='container'>\r\n      {/* Page header (title and btn) */}\r\n      <div className='page-header mt-2 d-flex justify-content-between align-items-center'>\r\n        <h1 className='page-title'>Projects</h1>\r\n        <button className=\"btn btn-primary\" onClick={handleAddProjectClick}>\r\n          <FontAwesomeIcon icon={faPlus} className=\"me-2\" />\r\n          <span>Add Project</span>\r\n        </button>\r\n      </div>\r\n      <div className='panel-content mt-2'>\r\n        {/* Search bar */}\r\n        <div className='col-6'>\r\n          <div className=\"form-group d-flex justify-content-between align-items-center\">\r\n            <label htmlFor=\"search\" className=\"sr-only\">Search</label>\r\n            <input type=\"text\" className=\"form-control\" name=\"search\" id=\"search\" placeholder=\"Search for projects\" value={searchQuery} onChange={handleSearchChange} onKeyPress={handleKeyPress} />\r\n            <button className='ms-2 btn btn-secondary' style={{ backgroundColor: '#E6E8E6', border: 'none' }} onClick={handleSearch}><span><FontAwesomeIcon icon={faSearch} className='me-2 ms-2' style={{ color: '#000' }} /></span></button>\r\n          </div>\r\n        </div>\r\n        {/* Projects list */}\r\n        {loading ? (\r\n          <h4>Loading projects...</h4>\r\n        ) : (\r\n          <div className='col-12 mt-4'>\r\n            {projects.length === 0 ? (\r\n              <h4>There are no projects that match your search.</h4>\r\n            ) : (\r\n              <ul className=\"list-group\">\r\n                {projects.map(project => (\r\n                  <div key={project._id} className=\"mt-1 mb-1\" >\r\n                    {/* Project Item List */}\r\n                    <div className='list-group-item' style={{ backgroundColor: '#e6e8e6', borderColor: '#e6e8e6', borderRadius: '8px' }}>\r\n                      <div className='row align-items-center'>\r\n                        <div className=\"col-md-9\">\r\n                          <div className=\"d-flex align-items-center\">\r\n                            <FontAwesomeIcon onClick={() => toggleProjectDescription(project._id)} style={{ cursor: 'pointer' }} icon={expandedProject === project._id ? faChevronDown : faChevronRight} className=\"me-2\" />\r\n                            <span\r\n                              className='ms-2'\r\n                              onClick={() => navigate(`/projects/${project._id}`)}\r\n                              style={{ cursor: 'pointer', textDecoration: 'none' }}\r\n                              onMouseEnter={(e) => e.target.style.textDecoration = 'underline'}\r\n                              onMouseLeave={(e) => e.target.style.textDecoration = 'none'}>\r\n                              {project.name} - 100%\r\n                            </span>\r\n                            {/* Project details such as 'last started' and 'created at' */}\r\n                            <label className='ms-4 tiny-label' style={{ fontSize: '10px', color: 'gray' }}><FontAwesomeIcon icon={faClock} /><span className='ms-1'>Last started: {project.dateLastStarted ? parseDate(project.dateLastStarted) : 'Never'}</span></label>\r\n                            <label className='ms-3 tiny-label' style={{ fontSize: '10px', color: 'gray' }}><FontAwesomeIcon icon={faFolderPlus} /><span className='ms-1'>Created at: </span> {formatDate(project.dateCreated)}</label>\r\n                          </div>\r\n                        </div>\r\n                        {/* Project status button */}\r\n                        <div className='col-md-3'>\r\n                          <div className='d-flex align-items-center justify-content-end'>\r\n                            <FontAwesomeIcon onClick={() => handleProjectStatus(project._id, project.status)} icon={project.status ? faPause : faPlay} size=\"2x\" style={{ cursor: 'pointer', display: 'flex', justifyContent: 'center' }} />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      {/* Project description */}\r\n                      {expandedProject === project._id && (\r\n                        <p className=\"mt-2 mb-1\">{project.description}</p>\r\n                      )}\r\n                    </div>\r\n                    {/* Streams List Associated to project (show if project is expanded) */}\r\n                    {expandedProject === project._id && (\r\n                      <div className='row d-flex justify-content-end'>\r\n                        <div className='col-11'>\r\n                          {/* Conditional rendering based on whether the project has streams */}\r\n                          {projects.find(proj => proj._id === project._id)?.streams.length > 0 ? (\r\n                            // Render streams if there are any associated\r\n                            projects.find(proj => proj._id === project._id).streams.map((stream, index) => (\r\n                              <li key={index} className=\"list-group-item mt-1 mb-1\" style={{ backgroundColor: '#F5F6F5', borderRadius: '8px' }}>\r\n                                {/* Stream details */}\r\n                                <div className=\"d-flex align-items-center\">\r\n                                  <div className='col-md-9'>\r\n                                    <div className='d-flex align-items-center'>\r\n                                      {/* Stream topic */}\r\n                                      <span\r\n                                        className='ms-2'\r\n                                        onClick={() => navigate(`/streams/${stream._id}`)}\r\n                                        style={{ cursor: 'pointer', textDecoration: 'none' }}\r\n                                        onMouseEnter={(e) => e.target.style.textDecoration = 'underline'}\r\n                                        onMouseLeave={(e) => e.target.style.textDecoration = 'none'}>\r\n                                        {stream.topic}\r\n                                      </span>\r\n                                      {/* Stream details such as 'last started' and 'created at' */}\r\n                                      <label className='ms-4 tiny-label' style={{ fontSize: '10px', color: 'gray' }}><FontAwesomeIcon icon={faClock} /><span className='ms-1'>Last started: {stream.dateLastStarted ? parseDate(stream.dateLastStarted) : 'Never'}</span></label>\r\n                                      <label className='ms-3 tiny-label' style={{ fontSize: '10px', color: 'gray' }}><FontAwesomeIcon icon={faFolderPlus} /><span className='ms-1'>Created at: </span> {formatDate(stream.dateCreated)}</label>\r\n                                    </div>\r\n                                  </div>\r\n                                  {/* Project status button */}\r\n                                  <div className='col-md-3'>\r\n                                    <div className='d-flex align-items-center justify-content-end me-1'>\r\n                                      <FontAwesomeIcon onClick={() => handleStreamStatus(stream._id, stream.status)} icon={stream.status ? faPause : faPlay} style={{ cursor: 'pointer', fontSize: '25px', display: 'flex', justifyContent: 'center' }} />\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </li>\r\n                            ))\r\n                          ) : (\r\n                            // Render message if there are no streams associated\r\n                            <p className=\"mt-2 mb-1\" style={{ fontSize: '14px', color: 'gray' }}>There are no streams associated with this project yet.</p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Projects;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}